<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="The Unbiased package offers a comprehensive suite of randomization
 algorithms for clinical trials, encompassing dynamic strategies like the 
 minimization method, simple randomization approaches, and block randomization
 techniques. Its primary purpose is to provide a harmonized set of functions that
 will seamlessly integrate with a production-ready plumber API, also contained
 within the package. This integration is designed to facilitate a smooth and
 efficient interface with electronic Case Report Form (eCRF) systems, enhancing
 the capability of clinical trials to manage patient allocation.">
<title>Diverse Randomization Algorithms for Clinical Trials • unbiased</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Montserrat-0.4.8/font.css" rel="stylesheet">
<link href="deps/JetBrains_Mono-0.4.8/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Diverse Randomization Algorithms for Clinical Trials">
<meta property="og:description" content="The Unbiased package offers a comprehensive suite of randomization
 algorithms for clinical trials, encompassing dynamic strategies like the 
 minimization method, simple randomization approaches, and block randomization
 techniques. Its primary purpose is to provide a harmonized set of functions that
 will seamlessly integrate with a production-ready plumber API, also contained
 within the package. This integration is designed to facilitate a smooth and
 efficient interface with electronic Case Report Form (eCRF) systems, enhancing
 the capability of clinical trials to manage patient allocation.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">unbiased</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/minimization_randomization_comparison.html">Comparison of Minimization Randomization with Other Randomization Methods. Assessing the balance of covariates.</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="unbiased-">
<strong>unbiased</strong> <a href="https://ttscience.github.io/unbiased/"><img src="reference/figures/hex-unbiased.png" style="height: 140px;" align="right"></a>
<a class="anchor" aria-label="anchor" href="#unbiased-"></a>
</h1></div>
<blockquote>
<p>An API-based solution for Clinical Trial Randomization</p>
</blockquote>
<p>In clinical trials, the fair and efficient allocation of participants is essential for achieving reliable results. While there are many excellent R randomization packages available, none, to our knowledge, provide a dedicated API for this purpose. The <strong>unbiased</strong> package fills this gap by featuring a production-ready REST API designed for seamless integration. This unique combination allows for easy connection with electronic Case Report Forms (eCRF), enhancing data management and streamlining participant allocation.</p>
<div class="section level2">
<h2 id="why-choose-unbiased">Why choose <strong>unbiased</strong>?<a class="anchor" aria-label="anchor" href="#why-choose-unbiased"></a>
</h2>
<p>Our goal in creating <strong>unbiased</strong> was to provide a user-friendly yet powerful tool that addresses the nuanced demands of clinical trial randomization. It offers:</p>
<ul>
<li>
<strong>Production-Ready REST API</strong>: Built for seamless integration with eCRF/EDC systems, facilitating real-time randomization and automation.</li>
<li>
<strong>Extensive Database Integration</strong>: Supports robust data management practices, ensuring that participant information and randomization outcomes are securely managed and easily accessible.</li>
<li>
<strong>Commitment to Quality</strong>: Emphasizes development best practices, including comprehensive code coverage, to deliver a reliable and trustworthy solution.</li>
<li>
<strong>Adaptability</strong>: Whether for small-scale studies or large, multi-center trials, <strong>unbiased</strong> scales to meet your needs.</li>
<li>
<strong>Comprehensive Documentation</strong>: To support you in applying the package effectively.</li>
</ul>
<p>By choosing <strong>unbiased</strong>, you’re adopting a sophisticated approach to trial randomization, ensuring fair and efficient participant allocation across your studies and support of the broader objectives of clinical research through technology.</p>
</div>
<div class="section level2">
<h2 id="table-of-contents">Table of Contents<a class="anchor" aria-label="anchor" href="#table-of-contents"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<a href="#background">Background</a>
<ul>
<li><a href="#purpose-and-scope-for-clinical-trial-randomization">Purpose and Scope for Clinical Trial Randomization</a></li>
<li><a href="#comparison-with-other-solutions">Comparison with Other Solutions</a></li>
</ul>
</li>
<li>
<a href="#quickstart-guide">Quickstart Guide</a>
<ul>
<li><a href="#quick-setup-with-docker">Quick Setup with Docker</a></li>
<li><a href="#api-configuration">API Configuration</a></li>
<li><a href="#alternative-installation-method">Alternative Installation Method</a></li>
</ul>
</li>
<li>
<a href="#getting-started-with-unbiased">Getting started with <strong>unbiased</strong></a>
<ul>
<li>
<a href="#api-endpoints">API Endpoints</a>
<ul>
<li><a href="#study-creation">Study Creation</a></li>
<li><a href="#patient-randomization">Patient Randomization</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#technical-implementation">Technical Implementation</a>
<ul>
<li><a href="#quality-assurance-measures">Quality Assurance Measures</a></li>
<li>
<a href="#running-tests">Running Tests</a>
<ul>
<li><a href="#executing-tests-from-an-r-interactive-session">Executing Tests from an R Interactive Session</a></li>
<li><a href="#executing-tests-from-the-command-line">Executing Tests from the Command Line</a></li>
<li><a href="#running-tests-with-docker-compose">Running Tests with Docker Compose</a></li>
</ul>
</li>
<li><a href="#code-coverage">Code Coverage</a></li>
<li><a href="#configuring-sentry">Configuring Sentry</a></li>
</ul>
</li>
</ol>
</div>
</div>
<div class="section level1">
<h1 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h1>
<div class="section level2">
<h2 id="purpose-and-scope-for-clinical-trial-randomization">Purpose and Scope for Clinical Trial Randomization<a class="anchor" aria-label="anchor" href="#purpose-and-scope-for-clinical-trial-randomization"></a>
</h2>
<p>Randomization is the gold standard for conducting clinical trials and a fundamental aspect of clinical trials, in studies comparing two or more arms. In most cases randomization is a desirable technique that will ensure that patients are randomly allocated to defined groups. This is essential for maintaining the integrity of the trial and ensuring that the results are reliable, and blinding of research personnel. However, there are situations where it is desirable for studies to balance patients in terms of numbers in each group or, in addition, to achieve balance with respect to other relevant factors, such as sex or diabetes type. Adequate selection of randomization methods allows the intended randomization goals to be realized.</p>
<p><strong>Unbiased</strong> compared to standard and most commonly used randomization methods, e.g. the simple method or the block method, apart from these methods, additionally offers enhanced features of more flexible adaptive methods, which are based on current information about the allocation of patients in the trial. Compared to, for example, block randomization, adaptive randomization not only ensures relatively equal allocation to patient groups, but also allows the groups to be balanced on the basis of certain important covariates, which is its key advantage. This randomization requires predefined criteria, such as the probability with which a given patient will be assigned to a group based on minimizing the total imbalance, or weights that can be assigned personally for each individual covariate. Its advanced algorithmic approach sets it apart from others by minimizing selection bias and improving the overall efficiency of the randomization process in clinical trials.</p>
<p><strong>Unbiased</strong> allows the use of simple, block and adaptive minimization randomization methods relevant to the conduct of clinical trials, so package caters to the needs of clinical trial randomization. …</p>
<p>To find out more on differences in randomization methods, read our vignette on <a href="vignettes/articles/minimization_randomization_comparison.Rmd">Comparative Analysis of Randomization Methods</a>.</p>
</div>
<div class="section level2">
<h2 id="comparison-with-other-solutions">Comparison with other solutions<a class="anchor" aria-label="anchor" href="#comparison-with-other-solutions"></a>
</h2>
<p>There are many packages that perform specific randomization methods in R. Most of them are designed for stratified randomization and permuted blocks, such as <a href="https://CRAN.R-project.org/package=blockrand" class="external-link">blockrand</a> and <a href="https://CRAN.R-project.org/package=randomizeR" class="external-link">randomizeR</a>. Some of them also utilize the options for using minimization randomization - e.g. <a href="https://bioconductor.org/packages/randPack/" class="external-link">randpack</a> or <a href="https://CRAN.R-project.org/package=Minirand" class="external-link">Minirand</a>.</p>
<p>Our unique contribution to the landscape is the integration of a comprehensive API and a commitment to rigorous testing. This dual focus ensures that <strong>unbiased</strong> not only supports the practical needs of clinical trials, but also aligns with the technical requirements of modern clinical research environments. By prioritizing these aspects, <strong>unbiased</strong> addresses a critical gap in the market: the need for an eCRF-compatible randomization solution that is both dependable and easily integrated into existing workflows. This, together with the implementation of minimization techniques, sets <strong>unbiased</strong> apart as a novel, comprehensive tool.</p>
</div>
</div>
<div class="section level1">
<h1 id="quickstart-guide">Quickstart Guide<a class="anchor" aria-label="anchor" href="#quickstart-guide"></a>
</h1>
<p>Initiating your work with <strong>unbiased</strong> involves simple setup steps. Whether you’re integrating it into your R environment or deploying its API, we aim to equip you with a reliable tool that enhances the integrity and efficiency of your clinical trials.</p>
<div class="section level2">
<h2 id="quick-setup-with-docker">Quick Setup with Docker<a class="anchor" aria-label="anchor" href="#quick-setup-with-docker"></a>
</h2>
<p>The most straightforward way to deploy <strong>unbiased</strong> is through our Docker images. This ensures that you can get <strong>unbiased</strong> up and running with minimal setup, regardless of your local environment. To use <strong>unbiased</strong>, pull the latest Docker image:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">docker</span> pull ghcr.io/ttscience/unbiased</span></code></pre></div>
<p>To run <strong>unbiased</strong> with Docker, ensuring you have set the necessary environment variables:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> POSTGRES_DB=mydb <span class="at">-e</span> POSTGRES_USER=myuser <span class="at">-e</span> POSTGRES_PASSWORD=mypassword <span class="at">-e</span> UNBIASED_PORT=3838 ghcr.io/ttscience/unbiased</span></code></pre></div>
<p>This command starts the <strong>unbiased</strong> API, making it accessible on the specified port. It’s crucial to have your PostgreSQL database ready, as <strong>unbiased</strong> will automatically configure the necessary database structures upon startup.</p>
</div>
<div class="section level2">
<h2 id="api-configuration">API configuration<a class="anchor" aria-label="anchor" href="#api-configuration"></a>
</h2>
<p>The <strong>unbiased</strong> API server can be configured using environment variables. The following environment variables need to be set for the server to start:</p>
<ul>
<li>
<code>POSTGRES_DB</code>: The name of the PostgreSQL database to connect to.</li>
<li>
<code>POSTGRES_HOST</code>: The host of the PostgreSQL database. This could be a hostname, such as <code>localhost</code> or <code>database.example.com</code>, or an IP address.</li>
<li>
<code>POSTGRES_PORT</code>: The port on which the PostgreSQL database is listening. Defaults to <code>5432</code> if not provided.</li>
<li>
<code>POSTGRES_USER</code>: The username for authentication with the PostgreSQL database.</li>
<li>
<code>POSTGRES_PASSWORD</code>: The password for authentication with the PostgreSQL database.</li>
<li>
<code>UNBIASED_HOST</code>: The host on which the API will run. Defaults to <code>0.0.0.0</code> if not provided.</li>
<li>
<code>UNBIASED_PORT</code>: The port on which the API will listen. Defaults to <code>3838</code> if not provided.</li>
</ul>
</div>
<div class="section level2">
<h2 id="alternative-installation-method">Alternative Installation Method<a class="anchor" aria-label="anchor" href="#alternative-installation-method"></a>
</h2>
<p>For those preferring to work directly within the R environment, the <strong>unbiased</strong> package offers an alternative installation method via GitHub. This approach allows users to easily integrate <strong>unbiased</strong> into their R projects. To proceed with this method, utilize the <code>devtools</code> package for installation by executing the following command:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ttscience/unbiased"</span><span class="op">)</span></span></code></pre></div>
<p>Following the package installation, the <strong>unbiased</strong> API can be launched within R. Simply invoke the <code><a href="reference/run_unbiased.html">run_unbiased()</a></code> function to start the API:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">unbiased</span><span class="fu">::</span><span class="fu"><a href="reference/run_unbiased.html">run_unbiased</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This initiates the API server, by default, on your local machine (<a href="http://localhost:3838" class="external-link uri">http://localhost:3838</a>), making it accessible for interaction through various HTTP clients, including curl, Postman, or R’s <code>httr</code> package.</p>
</div>
</div>
<div class="section level1">
<h1 id="getting-started-with-unbiased">Getting started with <strong>unbiased</strong>
<a class="anchor" aria-label="anchor" href="#getting-started-with-unbiased"></a>
</h1>
<p>The <strong>unbiased</strong> package offers functions for randomizing participants in clinical trials, ensuring a fair and transparent process.</p>
<p>Complete documentation for the implemented methodology and examples of how to use them are available on our GitHub Pages, providing all the information you need to integrate <strong>unbiased</strong> into your trial management workflow. Below, we present the basic steps for using <strong>unbiased</strong> through the API.</p>
<div class="section level2">
<h2 id="api-endpoints">API Endpoints<a class="anchor" aria-label="anchor" href="#api-endpoints"></a>
</h2>
<p>The <strong>unbiased</strong> API is designed to facilitate clinical trial management through a set of endpoints:</p>
<ul>
<li>
<strong>Study Management</strong>: Create and configure new studies, including specifying randomization parameters and treatment arms.</li>
<li>
<strong>Participant Randomization</strong>: Dynamically randomize participants to treatment groups based on the study’s configuration and existing participant data.</li>
</ul>
<div class="section level3">
<h3 id="study-creation">Study Creation<a class="anchor" aria-label="anchor" href="#study-creation"></a>
</h3>
<p>To initialize a study using Pocock’s minimization method, use the POST /minimisation_pocock endpoint. The required JSON payload should detail the study, including treatment groups, allocation ratios, and covariates.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Initialize a study with Pocock's minimisation method</span></span>
<span><span class="va">response</span> <span class="op">&lt;-</span> <span class="fu">request</span><span class="op">(</span><span class="va">api_url</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">req_url_path</span><span class="op">(</span><span class="st">"study"</span>, <span class="st">"minimisation_pocock"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">req_method</span><span class="op">(</span><span class="st">"POST"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">req_body_json</span><span class="op">(</span></span>
<span>      data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        identifier <span class="op">=</span> <span class="st">"My_study_1"</span>,</span>
<span>        name <span class="op">=</span> <span class="st">"Study 1"</span>,</span>
<span>        method <span class="op">=</span> <span class="st">"var"</span>,</span>
<span>        p <span class="op">=</span> <span class="fl">0.85</span>,</span>
<span>        arms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>          <span class="st">"placebo"</span> <span class="op">=</span> <span class="fl">1</span>,</span>
<span>          <span class="st">"treatment"</span> <span class="op">=</span> <span class="fl">1</span></span>
<span>        <span class="op">)</span>,</span>
<span>        covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>          sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"female"</span>, <span class="st">"male"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"up to 50"</span>, <span class="st">"51 or more"</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>This call sets up the study and returns an ID for accessing further study-related endpoints.</p>
</div>
<div class="section level3">
<h3 id="patient-randomization">Patient Randomization<a class="anchor" aria-label="anchor" href="#patient-randomization"></a>
</h3>
<p>The POST /{study_id}/patient endpoint assigns a new patient to a treatment group, requiring patient details and covariate information in the JSON payload.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Randomize a new patient</span></span>
<span><span class="fu">req_url_path</span><span class="op">(</span><span class="st">"study"</span>, <span class="va">my_study_id</span>, <span class="st">"patient"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>          <span class="fu">req_method</span><span class="op">(</span><span class="st">"POST"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>          <span class="fu">req_body_json</span><span class="op">(</span></span>
<span>            data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>              current_state <span class="op">=</span></span>
<span>                <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>                  <span class="st">"sex"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"female"</span><span class="op">)</span>,</span>
<span>                  <span class="st">"age"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"up to 50"</span><span class="op">)</span>,</span>
<span>                  <span class="st">"arm"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> </span>
<span>                <span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span></span></code></pre></div>
<p>This endpoint determines the patient’s treatment group.</p>
</div>
</div>
</div>
<div class="section level1">
<h1 id="technical-details">Technical details<a class="anchor" aria-label="anchor" href="#technical-details"></a>
</h1>
<div class="section level2">
<h2 id="running-tests">Running Tests<a class="anchor" aria-label="anchor" href="#running-tests"></a>
</h2>
<p>Unbiased provides an extensive collection of tests to ensure correct functionality.</p>
<div class="section level3">
<h3 id="executing-tests-from-an-r-interactive-session">Executing Tests from an R Interactive Session<a class="anchor" aria-label="anchor" href="#executing-tests-from-an-r-interactive-session"></a>
</h3>
<p>To execute tests using an interactive R session, run the following commands:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">load_all</span>()</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">test_package</span>(<span class="sc">**</span>unbiased<span class="sc">**</span>)</span></code></pre></div>
<p>Make sure that <code>devtools</code> package is installed in your environment.</p>
<p>Ensure that the necessary database connection environment variables are set before running these tests. You can set environment variables using methods such as <code>Sys.setenv</code>.</p>
<p>Running these tests will start the Unbiased API on a random port.</p>
</div>
<div class="section level3">
<h3 id="executing-tests-from-the-command-line">Executing Tests from the Command Line<a class="anchor" aria-label="anchor" href="#executing-tests-from-the-command-line"></a>
</h3>
<p>Use the helper script <code>run_tests.sh</code> to execute tests from the command line. Remember to set the database connection environment variables before running the tests.</p>
</div>
<div class="section level3">
<h3 id="running-tests-with-docker-compose">Running Tests with Docker Compose<a class="anchor" aria-label="anchor" href="#running-tests-with-docker-compose"></a>
</h3>
<p>Docker Compose can be used to build the Unbiased Docker image and execute all tests. This can be done using the provided <code>docker-compose.test.yml</code> file. This method ensures a consistent testing environment and simplifies the setup process.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">docker</span> compose <span class="at">-f</span> docker-compose.test.yml build</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">docker</span> compose <span class="at">-f</span> docker-compose.test.yml run tests</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="code-coverage">Code Coverage<a class="anchor" aria-label="anchor" href="#code-coverage"></a>
</h3>
<p>Unbiased supports code coverage analysis through the <code>covr</code> package. This allows you to measure the effectiveness of your tests by showing which parts of your R code in the <code>R</code> directory are actually being tested.</p>
<p>To calculate code coverage, you will need to install the <code>covr</code> package. Once installed, you can use the following methods:</p>
<ul>
<li>
<code>covr::report()</code>: This method runs all tests and generates a detailed coverage report in HTML format.</li>
<li>
<code>covr::package_coverage()</code>: This method provides a simpler, text-based code coverage report.</li>
</ul>
<p>Alternatively, you can use the provided <code>run_tests_with_coverage.sh</code> script to run Unbiased tests with code coverage.</p>
</div>
<div class="section level3">
<h3 id="configuring-sentry">Configuring Sentry<a class="anchor" aria-label="anchor" href="#configuring-sentry"></a>
</h3>
<p>The Unbiased server offers robust error reporting capabilities through the integration of the Sentry service. To activate Sentry, simply set the <code>SENTRY_DSN</code> environment variable. Additionally, you have the flexibility to customize the setup further by configuring the following environment variables:</p>
<ul>
<li><p><code>SENTRY_ENVIRONMENT</code> This is used to set the environment (e.g., “production”, “staging”, “development”). If not set, the environment defaults to “development”.</p></li>
<li><p><code>SENTRY_RELEASE</code> This is used to set the release in Sentry. If not set, the release defaults to “unspecified”.</p></li>
</ul>
</div>
</div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing unbiased</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Kamil Sijko <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2203-1065" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Kinga Sałata <br><small class="roles"> Author </small>  </li>
<li>Aleksandra Duda <br><small class="roles"> Author </small>  </li>
<li>Łukasz Wałejko <br><small class="roles"> Author </small>  </li>
<li>Jagoda jagoda.glowacka-walas@ttsi.com.pl Głowacka-Walas <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-7628-8691" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Transition Technologies Science Sp. z o.o. <br><small class="roles"> Funder, copyright holder </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Kamil Sijko, Kinga Sałata, Aleksandra Duda, Łukasz Wałejko, Jagoda <a href="mailto:jagoda.glowacka-walas@ttsi.com.pl" class="email">jagoda.glowacka-walas@ttsi.com.pl</a> Głowacka-Walas, Transition Technologies Science Sp. z o.o..</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
