<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='

The randomize_dynamic function implements the dynamic randomization
algorithm using the minimization method proposed by Pocock (Pocock and Simon,
1975). It requires defining basic study parameters: the number of arms (K),
number of covariates (C), patient allocation ratios (\(a_k\))
(where k = 1,2,…., K), weights for the covariates (\(w_i\))
(where i = 1,2,…., C), and the maximum probability (p) of assigning a patient
to the group with the smallest total unbalance multiplied by
the respective weights (\(G_k\)). As the total unbalance for the first
patient is the same regardless of the assigned arm, this patient is randomly
allocated to a given arm. Subsequent patients are randomized based on the
calculation of the unbalance depending on the selected method: "range",
"var" (variance), or "sd" (standard deviation). In the case of two arms,
the "range" method is equivalent to the "sd" method.'><title>Patient Randomization Using Minimization Method — randomize_minimisation_pocock • unbiased</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Patient Randomization Using Minimization Method — randomize_minimisation_pocock"><meta property="og:description" content='

The randomize_dynamic function implements the dynamic randomization
algorithm using the minimization method proposed by Pocock (Pocock and Simon,
1975). It requires defining basic study parameters: the number of arms (K),
number of covariates (C), patient allocation ratios (\(a_k\))
(where k = 1,2,…., K), weights for the covariates (\(w_i\))
(where i = 1,2,…., C), and the maximum probability (p) of assigning a patient
to the group with the smallest total unbalance multiplied by
the respective weights (\(G_k\)). As the total unbalance for the first
patient is the same regardless of the assigned arm, this patient is randomly
allocated to a given arm. Subsequent patients are randomized based on the
calculation of the unbalance depending on the selected method: "range",
"var" (variance), or "sd" (standard deviation). In the case of two arms,
the "range" method is equivalent to the "sd" method.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">unbiased</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/minimization_randomization_comparison.html">Comparison of Minimization Randomization with Other Randomization Methods. Assessing the balance of covariates.</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Patient Randomization Using Minimization Method</h1>
      
      <div class="d-none name"><code>randomize_minimisation_pocock.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script>

The <code>randomize_dynamic</code> function implements the dynamic randomization
algorithm using the minimization method proposed by Pocock (Pocock and Simon,
1975). It requires defining basic study parameters: the number of arms (K),
number of covariates (C), patient allocation ratios (\(a_k\))
(where k = 1,2,…., K), weights for the covariates (\(w_i\))
(where i = 1,2,…., C), and the maximum probability (p) of assigning a patient
to the group with the smallest total unbalance multiplied by
the respective weights (\(G_k\)). As the total unbalance for the first
patient is the same regardless of the assigned arm, this patient is randomly
allocated to a given arm. Subsequent patients are randomized based on the
calculation of the unbalance depending on the selected method: "range",
"var" (variance), or "sd" (standard deviation). In the case of two arms,
the "range" method is equivalent to the "sd" method.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">randomize_minimisation_pocock</span><span class="op">(</span></span>
<span>  <span class="va">arms</span>,</span>
<span>  <span class="va">current_state</span>,</span>
<span>  <span class="va">weights</span>,</span>
<span>  <span class="va">ratio</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"var"</span>,</span>
<span>  p <span class="op">=</span> <span class="fl">0.85</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>arms</dt>
<dd><p><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code><br>
Arm names.</p></dd>


<dt>current_state</dt>
<dd><p><code>tibble()</code><br>
table of covariates and current arm assignments in column <code>arm</code>,
last row contains the new patient with empty string for <code>arm</code></p></dd>


<dt>weights</dt>
<dd><p><code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code><br>
vector of positive weights, equal in length to number of covariates,
numbered after covariates, defaults to equal weights</p></dd>


<dt>ratio</dt>
<dd><p><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code><br>
Vector of positive integers (0 is allowed), equal in length to number
of arms, named after arms, defaults to equal weight</p></dd>


<dt>method</dt>
<dd><p><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code><br>
Function used to compute within-arm variability, must be one of:
<code>sd</code>, <code>var</code>, <code>range</code>, defaults to <code>var</code></p></dd>


<dt>p</dt>
<dd><p><code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code><br>
single value, proportion of randomness (0, 1) in the randomization
vs determinism, defaults to 85% deterministic</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code><br></p>


<p>name of the arm assigned to the patient</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Initially, the algorithm creates a matrix of results comparing a newly
randomized patient with the current balance of patients based on the defined
covariates. In the next step, for each arm and specified covariate,
various scenarios of patient allocation are calculated. The existing results
(n) are updated with the new patient, and then, considering the ratio
coefficients, the results are divided by the specific allocation ratio.
Depending on the method, the total unbalance is then calculated,
taking into account the weights, and the number of covariates using one
of three methods (“sd”, “range”, “var”).
Based on the number of defined arms, the minimum value of (\(G_k\))
(defined as the weighted sum of the level-based imbalance) selects the arm to
which the patient will be assigned with a predefined probability (p). The
probability that a patient will be assigned to any other arm will then be
equal (1-p)/(K-1)
for each of the remaining arms.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This function's implementation is a refactored adaptation
of the codebase from the 'Minirand' package.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Pocock, S. J., &amp; Simon, R. (1975). Minimization: A new method
of assigning patients to treatment and control groups in clinical trials.</p>
<p>Minirand Package: Man Jin, Adam Polis, Jonathan Hartzel.
(https://CRAN.R-project.org/package=Minirand)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">n_at_the_moment</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="va">arms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"active low"</span>, <span class="st">"active high"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="va">n_at_the_moment</span> <span class="op">+</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">diabetes</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"diabetes"</span>, <span class="st">"no diabetes"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="va">n_at_the_moment</span> <span class="op">+</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>    replace <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">arm</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">arms</span>,</span></span>
<span class="r-in"><span>    <span class="va">n_at_the_moment</span>,</span></span>
<span class="r-in"><span>    replace <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.4</span>, <span class="fl">0.2</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">covar_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="va">sex</span>, <span class="va">diabetes</span>, <span class="va">arm</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">covar_df</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 11 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    sex   diabetes    arm          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> M     no diabetes <span style="color: #949494;">"</span>control<span style="color: #949494;">"</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> F     no diabetes <span style="color: #949494;">"</span>active low<span style="color: #949494;">"</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> F     no diabetes <span style="color: #949494;">"</span>active high<span style="color: #949494;">"</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> M     no diabetes <span style="color: #949494;">"</span>control<span style="color: #949494;">"</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> M     no diabetes <span style="color: #949494;">"</span>active low<span style="color: #949494;">"</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> M     no diabetes <span style="color: #949494;">"</span>control<span style="color: #949494;">"</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> M     no diabetes <span style="color: #949494;">"</span>control<span style="color: #949494;">"</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> M     no diabetes <span style="color: #949494;">"</span>control<span style="color: #949494;">"</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> F     diabetes    <span style="color: #949494;">"</span>active low<span style="color: #949494;">"</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> F     no diabetes <span style="color: #949494;">"</span>active low<span style="color: #949494;">"</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> F     no diabetes <span style="color: #949494;">""</span>           </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">randomize_minimisation_pocock</span><span class="op">(</span>arms <span class="op">=</span> <span class="va">arms</span>, current_state <span class="op">=</span> <span class="va">covar_df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "active high"</span>
<span class="r-in"><span><span class="fu">randomize_minimisation_pocock</span><span class="op">(</span></span></span>
<span class="r-in"><span>  arms <span class="op">=</span> <span class="va">arms</span>, current_state <span class="op">=</span> <span class="va">covar_df</span>,</span></span>
<span class="r-in"><span>  ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"control"</span> <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>    <span class="st">"active low"</span> <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>    <span class="st">"active high"</span> <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"sex"</span> <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>    <span class="st">"diabetes"</span> <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "active high"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Kamil Sijko, Kinga Sałata, Aleksandra Duda, Łukasz Wałejko, Jagoda <a href="mailto:jagoda.glowacka-walas@ttsi.com.pl" class="email">jagoda.glowacka-walas@ttsi.com.pl</a> Głowacka-Walas, Transition Technologies Science Sp. z o.o..</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

